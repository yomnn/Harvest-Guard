<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Upload Image for Plant Health Analysis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/upload.css') }}">
</head>
<body>
    <div class="main">
        <div class="navbar">
            <div class="icon">
                <h2 class="logo">HARVEST GUARD</h2>
            </div>
            <div class="menu">
                <ul>
                    <li><a href="/">HOME</a></li>
                    <li><a href="/about">ABOUT</a></li>
                    <li><a href="/contact">CONTACTUS</a></li>
                    <li><a href="/TypePage">TYPES</a></li>
                    <li><a href="/info">INFO</a></li>
                    <li><a href="/learn">LEARN</a></li>
                </ul>
            </div>
        </div>
        <div class="content">
            <h1>Upload Image for Analysis</h1>
            <form id="uploadForm" enctype="multipart/form-data">
                <label for="model_type">Select Plant Type:</label>
                <select name="model_type" id="model_type">
                    <option value="mango">Mango</option>
                    <option value="banana">Banana</option>
                    <option value="corn">Corn</option>
                    <option value="cotton">Cotton</option>
                    <option value="eggplant">Eggplant</option>
                    <option value="peach">Peach</option>
                    <option value="pepper">Pepper</option>
                    <option value="potato">Potato</option>
                    <option value="rice">Rice</option>
                    <option value="tomato">Tomato</option>
                    <option value="grapes">Grapes</option>
                </select>
                <br><br>
                <input type="file" name="file" id="fileInput" required>
                <br><br>
                <button type="submit">Analyze Image</button>
            </form>
            <div id="predictionResult" class="prediction-result"></div> <!-- Placeholder for prediction result -->
        </div>
    </div>

    <script>
        document.getElementById("uploadForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission
            
            // Perform AJAX request to submit form data
            var formData = new FormData(this);
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/TypePage");
            xhr.onload = function() {
                if (xhr.status === 200) {
                    // Update the prediction result on the page
                    document.getElementById("predictionResult").innerHTML = xhr.responseText;
                } else {
                    console.error("Request failed: " + xhr.status);
                }
            };
            xhr.send(formData);
        });
    </script>
</body>
</html>